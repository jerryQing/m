<!doctype html public '-//W3C//DTD HTML 4.0 Transitional //EN'>
<html>
<head>
<title>README</title>
<meta charset='UTF-8' />
<meta name='generator' content='EverEdit' />
<link href='D:\Backup\桌面\EverEdit\4022\mode\markdown\default.css' rel='stylesheet'></link>
<link href='D:\Backup\桌面\EverEdit\4022\mode\markdown\prettify.css' rel='stylesheet'></link>
<script type='text/javascript' src='D:\Backup\桌面\EverEdit\4022\mode\markdown\prettify.js'></script>
<script type='text/javascript' src='D:\Backup\桌面\EverEdit\4022\mode\markdown\jquery-1.10.2.min.js'></script>
<script type='text/javascript' src='D:\Backup\桌面\EverEdit\4022\mode\markdown\toc.js'></script>
</head>
<body>
<div id='generated-toc'></div>
<h1>log4js-node <a href="http://travis-ci.org/nomiddlename/log4js-node"><img src="https://secure.travis-ci.org/nomiddlename/log4js-node.png?branch=master" alt="Build Status" title="" /></a></h1>

<p>This is a conversion of the <a href="https://github.com/stritti/log4js">log4js</a>
framework to work with <a href="http://nodejs.org">node</a>. I've mainly stripped out the browser-specific code and tidied up some of the javascript. </p>

<p>Out of the box it supports the following features:</p>

<ul>
<li>coloured console logging</li>
<li>replacement of node&#8217;s console.log functions (optional)</li>
<li>file appender, with log rolling based on file size</li>
<li>SMTP appender</li>
<li>GELF appender</li>
<li>hook.io appender</li>
<li>Loggly appender</li>
<li>Logstash UDP appender</li>
<li>multiprocess appender (useful when you&#8217;ve got worker processes)</li>
<li>a logger for connect/express servers</li>
<li>configurable log message layout/patterns</li>
<li>different log levels for different log categories (make some parts of your app log as DEBUG, others only ERRORS, etc.)</li>
</ul>

<p>NOTE: from log4js 0.5 onwards you&#8217;ll need to explicitly enable replacement of node&#8217;s console.log functions. Do this either by calling <code>log4js.replaceConsole()</code> or configuring with an object or json file like this:</p>

<pre><code class="javascript">{
  appenders: [
    { type: "console" }
  ],
  replaceConsole: true
}</code></pre>

<h2>installation</h2>

<p>npm install log4js</p>

<h2>usage</h2>

<p>Minimalist version:</p>

<pre><code class="javascript">var log4js = require('log4js');
var logger = log4js.getLogger();
logger.debug("Some debug messages");</code></pre>

<p>By default, log4js outputs to stdout with the coloured layout (thanks to <a href="http://github.com/masylum">masylum</a>), so for the above you would see:</p>

<pre><code class="bash">[2010-01-17 11:43:37.987] [DEBUG] [default] - Some debug messages</code></pre>

<p>See example.js for a full example, but here&#8217;s a snippet (also in fromreadme.js):</p>

<pre><code class="javascript">var log4js = require('log4js'); 
//console log is loaded by default, so you won't normally need to do this
//log4js.loadAppender('console');
log4js.loadAppender('file');
//log4js.addAppender(log4js.appenders.console());
log4js.addAppender(log4js.appenders.file('logs/cheese.log'), 'cheese');

var logger = log4js.getLogger('cheese');
logger.setLevel('ERROR');

logger.trace('Entering cheese testing');
logger.debug('Got cheese.');
logger.info('Cheese is Gouda.');
logger.warn('Cheese is quite smelly.');
logger.error('Cheese is too ripe!');
logger.fatal('Cheese was breeding ground for listeria.');</code></pre>

<p>Output:</p>

<pre><code class="bash">[2010-01-17 11:43:37.987] [ERROR] cheese - Cheese is too ripe!
[2010-01-17 11:43:37.990] [FATAL] cheese - Cheese was breeding ground for listeria.</code></pre>

<pre><code>
</code></pre>

<p>The first 5 lines of the code above could also be written as:</p>

<pre><code class="javascript">var log4js = require('log4js');
log4js.configure({
  appenders: [
    { type: 'console' },
    { type: 'file', filename: 'logs/cheese.log', category: 'cheese' }
  ]
});</code></pre>

<h2>configuration</h2>

<p>You can configure the appenders and log levels manually (as above), or provide a
configuration file (<code>log4js.configure('path/to/file.json')</code>), or a configuration object. The 
configuration file location may also be specified via the environment variable 
LOG4JS_CONFIG (<code>export LOG4JS_CONFIG=path/to/file.json</code>). 
An example file can be found in <code>test/log4js.json</code>. An example config file with log rolling is in <code>test/with-log-rolling.json</code>.
By default, the configuration file is checked for changes every 60 seconds, and if changed, reloaded. This allows changes to logging levels to occur without restarting the application.</p>

<p>To turn off configuration file change checking, configure with:</p>

<pre><code class="javascript">var log4js = require('log4js');
log4js.configure('my_log4js_configuration.json', {});</code></pre>

<p>To specify a different period:</p>

<pre><code class="javascript">log4js.configure('file.json', { reloadSecs: 300 });</code></pre>

<p>For FileAppender you can also pass the path to the log directory as an option where all your log files would be stored.</p>

<pre><code class="javascript">log4js.configure('my_log4js_configuration.json', { cwd: '/absolute/path/to/log/dir' });</code></pre>

<p>If you have already defined an absolute path for one of the FileAppenders in the configuration file, you could add a &#8220;absolute&#8221;: true to the particular FileAppender to override the cwd option passed. Here is an example configuration file:</p>

<pre><code class="json">#### my_log4js_configuration.json ####
{
  "appenders": [
    {
      "type": "file",
      "filename": "relative/path/to/log_file.log",
      "maxLogSize": 20480,
      "backups": 3,
      "category": "relative-logger"
    },
    {
      "type": "file",
      "absolute": true,
      "filename": "/absolute/path/to/log_file.log",
      "maxLogSize": 20480,
      "backups": 10,
      "category": "absolute-logger"          
    }
  ]
}</code></pre>

<pre><code>
</code></pre>

<p>Documentation for most of the core appenders can be found on the <a href="https://github.com/nomiddlename/log4js-node/wiki/Appenders">wiki</a>, otherwise take a look at the tests and the examples.</p>

<h2>Documentation</h2>

<p>See the <a href="https://github.com/nomiddlename/log4js-node/wiki">wiki</a>. Improve the <a href="https://github.com/nomiddlename/log4js-node/wiki">wiki</a>, please.</p>

<p>There&#8217;s also <a href="https://github.com/nomiddlename/log4js-example">an example application</a>.</p>

<h2>Contributing</h2>

<p>Contributions welcome, but take a look at the <a href="https://github.com/nomiddlename/log4js-node/wiki/Contributing">rules</a> first.</p>

<h2>License</h2>

<p>The original log4js was distributed under the Apache 2.0 License, and so is this. I've tried to
keep the original copyright and author credits in place, except in sections that I have rewritten
extensively.</p>
<script type='text/javascript'>
$(document).ready(function(){
  if($('code').length>0){
    $('code').parent().addClass('prettyprint linenums');
    prettyPrint();
};
});
</script>
</body>
</html>